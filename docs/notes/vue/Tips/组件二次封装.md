---
title: ç»„ä»¶äºŒæ¬¡å°è£…
createTime: 2025/06/16 09:36:37
permalink: /vue/edj79lv4/
---

::: note
å‚è€ƒè§†é¢‘ï¼š<https://www.bilibili.com/video/BV1soMtz4ExE/>
:::

ä»¥ `el-input` ä¸ºä¾‹ï¼ŒäºŒæ¬¡å°è£…ä¸€ä¸ª `my-input` ç»„ä»¶ã€‚

## éœ€è¦è€ƒè™‘çš„ä¸‰ä¸ªé—®é¢˜

1. `props` å¦‚ä½•ç©¿é€
2. æ’æ§½å¦‚ä½•ç©¿é€
3. ç»„ä»¶æ–¹æ³•å¦‚ä½•æš´éœ²ç»™çˆ¶ç»„ä»¶

## å®ç°

æ€è·¯ï¼šä½¿ç”¨åŠ¨æ€ç»„ä»¶ï¼Œç”¨ `h` å‡½æ•°åˆ›å»ºç»„ä»¶ï¼Œå¹¶ä¼ å…¥ `props` å’Œ `slots`ã€‚

::: code-tabs

@tab MyInput.vue

```vue
<script setup lang="ts">
import { h, getCurrentInstance } from "vue";
import { ElInput, type InputProps } from "element-plus";

const props = defineProps<Partial<InputProps>>();
const vm = getCurrentInstance();

/** å‘çˆ¶ç»„ä»¶æš´éœ²ç»„ä»¶å®ä¾‹ï¼Œçˆ¶ç»„ä»¶å¯ä»¥è°ƒç”¨ç»„ä»¶å®ä¾‹çš„æ–¹æ³• */
function changeRef(inputInstance) {
  if (!vm) return;
  vm.exposeProxy = vm.exposed = inputInstance || {};
}
</script>

<template>
  <div>
    <p>äºŒæ¬¡å°è£… el-input çš„è‡ªå®šä¹‰å†…å®¹</p>
    <component :is="h(ElInput, { ...$attrs, ...props, ref: changeRef }, $slots)"></component>
  </div>
</template>
```

@tab Parent.vue

```vue
<script setup lang="ts">
import { ref, useTemplateRef } from "vue";
import MyInput from "@/components/MyInput.vue";
import type { InputInstance } from "element-plus";

const msg = ref("hello, world");
const inputRef = useTemplateRef<InputInstance>("input-ref");

setTimeout(() => {
  if (!inputRef.value) return;
  console.log("ğŸš€ğŸš€ğŸš€ inputRef.value: ", inputRef.value);
  inputRef.value.clear();
}, 2000);
</script>

<template>
  <main>
    <MyInput ref="input-ref" v-model="msg">
      <template #append>append</template>
    </MyInput>
  </main>
</template>
```

:::
