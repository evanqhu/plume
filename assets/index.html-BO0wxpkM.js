import{_ as i,c as a,a as e,o as n}from"./app-BRZjaKcj.js";const l={};function t(h,s){return n(),a("div",null,s[0]||(s[0]=[e(`<div class="hint-container note"><p class="hint-container-title">注</p><p><a href="https://cn.vuejs.org/api/sfc-css-features.html" target="_blank" rel="noopener noreferrer">https://cn.vuejs.org/api/sfc-css-features.html</a></p><p><a href="https://juejin.cn/post/6978781674070884366" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/6978781674070884366</a></p><p><a href="https://juejin.cn/post/7413669480624357386" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/7413669480624357386</a></p><p><a href="https://vue-loader.vuejs.org/zh/guide/scoped-css.html#%E6%B7%B1%E5%BA%A6%E4%BD%9C%E7%94%A8%E9%80%89%E6%8B%A9%E5%99%A8" target="_blank" rel="noopener noreferrer">https://vue-loader.vuejs.org/zh/guide/scoped-css.html#深度作用选择器</a></p></div><h2 id="概念" tabindex="-1"><a class="header-anchor" href="#概念"><span>概念</span></a></h2><p>在 Vue 中，当 <code>&lt;style&gt;</code> 标签有 scoped 属性时，它的 CSS 只作用于当前组件中的元素，父组件的样式将不会渗透到子组件。 如果你希望 scoped 样式中的一个选择器能够作用得“更深”，例如影响子组件，你可以使用深度选择器。</p><p>添加 scoped 属性之后，会给组件中的元素添加一个唯一的动态属性，这样样式就只作用于当前组件内的元素了。</p><h2 id="深度选择器" tabindex="-1"><a class="header-anchor" href="#深度选择器"><span>深度选择器</span></a></h2><p>如果要修改内部组件的样式，就需要使用到样式穿透</p><h3 id="_1️⃣" tabindex="-1"><a class="header-anchor" href="#_1️⃣"><span>1️⃣ <code>&gt;&gt;&gt;</code></span></a></h3><p>不支持 sass；兼容性差，不推荐使用</p><div class="language-css line-numbers-mode" data-highlighter="shiki" data-ext="css" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">style</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> scoped</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">parent</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  &gt;&gt;&gt; .</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">child</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> {</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    color</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> red</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">}</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">style</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2️⃣-deep" tabindex="-1"><a class="header-anchor" href="#_2️⃣-deep"><span>2️⃣ <code>/deep/</code></span></a></h3><p>不支持 sass</p><div class="language-css line-numbers-mode" data-highlighter="shiki" data-ext="css" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">style</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> scoped</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">parent</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  /</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">deep</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/ .</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">child</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> {</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    color</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> red</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">}</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">style</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3️⃣-v-deep" tabindex="-1"><a class="header-anchor" href="#_3️⃣-v-deep"><span>3️⃣ <code>::v-deep</code></span></a></h3><p>Vue 3 中弃用（目前也能用）</p><div class="language-scss line-numbers-mode" data-highlighter="shiki" data-ext="scss" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">style</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> scoped lang=&quot;scss&quot;&gt;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">::</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">v-deep</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> .</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">demo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  color</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> red</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">style</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4️⃣-deep-伪类" tabindex="-1"><a class="header-anchor" href="#_4️⃣-deep-伪类"><span>4️⃣ <code>:deep()</code> 伪类</span></a></h3><p>推荐使用</p><div class="language-scss line-numbers-mode" data-highlighter="shiki" data-ext="scss" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">style</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> scoped lang=&quot;scss&quot;&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">parent</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> :deep(</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">demo</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  color</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> red</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">style</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的代码被编译成</p><div class="language-css line-numbers-mode" data-highlighter="shiki" data-ext="css" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">data-v-f3f3eg9</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> .</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  color</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> red</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="scoped-含义" tabindex="-1"><a class="header-anchor" href="#scoped-含义"><span>scoped 含义</span></a></h2><ul><li><code>.login-container</code> 这是一个普通的 class 选择器，用于选中 class 为 &quot;login-container&quot; 的元素</li><li><code>[data-v-37dfd6fc]</code> 这是一个属性选择器，用于选中具有 <code>data-v-37dfd6fc</code> 属性的元素</li></ul><h3 id="在-vue-中的含义" tabindex="-1"><a class="header-anchor" href="#在-vue-中的含义"><span>在 Vue 中的含义</span></a></h3><ul><li>Vue 的 scoped CSS：在 Vue 中，当给 <code>&lt;style&gt;</code> 标签添加 <code>scoped</code> 属性时，Vue 会给组件中的所有元素添加一个唯一的 <code>data-v-*</code> 属性。这个属性的作用是将样式的作用域限制在当前组件内，避免样式冲突。</li><li>选择器作用：因此，<code>.login-container[data-v-37dfd6fc]</code> 这个选择器结合了 class 选择器和属性选择器，其作用是： <ul><li><strong>选中:</strong> 选中当前组件中 class 为 &quot;login-container&quot; 的元素。</li><li><strong>确保样式作用域:</strong> 由于 <code>data-v-37dfd6fc</code> 是当前组件独有的属性，因此确保了样式只作用于当前组件内的 &quot;login-container&quot; 元素，避免了样式冲突。</li></ul></li></ul><h3 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h3><p><code>.login-container[data-v-37dfd6fc]</code> 这个选择器在 Vue 中主要用于：</p><ul><li>精确选中组件内的元素: 避免了同名 class 在不同组件中产生冲突。</li><li>保证样式的作用域: 确保样式只作用于当前组件，提高了样式的模块化和可维护性。</li></ul><h3 id="为什么有-data-v-37dfd6fc-这样的属性" tabindex="-1"><a class="header-anchor" href="#为什么有-data-v-37dfd6fc-这样的属性"><span>为什么有 <code>data-v-37dfd6fc</code> 这样的属性？</span></a></h3><ul><li>Vue 的编译过程: 当 Vue 编译模板时，会给组件中的每个元素添加一个唯一的 <code>data-v-*</code> 属性。</li><li>作用域隔离: 这个属性是 Vue 实现 scoped CSS 的关键，通过这个属性，Vue 可以区分不同组件的样式。</li><li>属性值: <code>data-v-37dfd6fc</code> 中的 <code>37dfd6fc</code> 是一个随机生成的 ID，保证了每个组件的属性值都是唯一的。</li></ul><h3 id="常见问题" tabindex="-1"><a class="header-anchor" href="#常见问题"><span>常见问题</span></a></h3><ul><li>为什么 <code>data-v-*</code> 属性中的 ID 是随机的？ 为了避免不同组件之间的样式冲突，Vue 会为每个组件生成一个唯一的 ID。</li><li>我可以手动修改 <code>data-v-*</code> 属性吗？ 不建议手动修改，因为这可能会破坏 Vue 的样式作用域机制。</li></ul><p>总之，<code>data-v-*</code> 属性是 Vue 实现 scoped CSS 的核心机制，理解这个属性对于深入了解 Vue 的样式系统非常重要。</p><blockquote><p>为了避免过多使用样式穿透，可以在一个组件中写两个 style 标签，一个加 scoped，一个不加，不加的就用来修改 UI 组件库或内部其他组件的样式的样式</p></blockquote><p>Vue 的作用域样式 Scoped CSS 的实现思路如下：</p><ol><li>为每个组件实例（注意：是组件的实例，不是组件类）生成一个能唯一标识组件实例的标识符，我称它为组件实例标识，简称实例标识，记作 InstanceID；</li><li>给组件模板中的每一个标签对应的 Dom 元素（组件标签对应的 Dom 元素是该组件的根元素）添加一个标签属性，格式为 <code>data-v-实例标识</code>，示例：<code>&lt;div data-v-e0f690c0=&quot;&quot; &gt;</code>；</li><li>给组件的作用域样式 <code>&lt;style scoped&gt;</code> 的每一个选择器的最后一个选择器单元增加一个属性选择器 <code>原选择器[data-v-实例标识]</code> ，示例：假设原选择器为 <code>.cls #id &gt; div</code>，则更改后的选择器为 <code>.cls #id &gt; div[data-v-e0f690c0]</code>；</li></ol>`,35)]))}const p=i(l,[["render",t]]),k=JSON.parse('{"path":"/others/g9se3d85/","title":"深度作用选择器","lang":"zh-CN","frontmatter":{"title":"深度作用选择器","createTime":"2024/12/23 11:52:21","permalink":"/others/g9se3d85/"},"git":{"updatedTime":1734930877000,"contributors":[{"name":"evanqhu","username":"evanqhu","email":"qianghu98@163.com","commits":1,"avatar":"https://avatars.githubusercontent.com/evanqhu?v=4","url":"https://github.com/evanqhu"}]},"filePathRelative":"notes/others/deep-selector.md","headers":[]}');export{p as comp,k as data};
